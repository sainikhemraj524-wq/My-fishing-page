<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>PhonePe Multi-Page with QR</title>
<script src="https://unpkg.com/html5-qrcode" type="text/javascript"></script>
<style>
    body { margin:0; font-family:Arial,sans-serif; background:#f2f2f2; color:#333; }
    header { background:linear-gradient(90deg,#6739b7,#512da8); color:white; padding:15px; text-align:center; font-size:20px; position:relative; }
    header button { position:absolute; left:10px; top:10px; background:transparent; border:none; color:white; font-size:18px; cursor:pointer; }
    .balance { background:white; margin:15px; padding:15px; border-radius:10px; font-size:18px; text-align:center; box-shadow:0 2px 4px rgba(0,0,0,0.2); }
    .section { display:grid; grid-template-columns:repeat(4,1fr); gap:10px; padding:10px; }
    .card { background:white; padding:15px; border-radius:10px; text-align:center; font-size:14px; cursor:pointer; box-shadow:0 2px 5px rgba(0,0,0,0.2); }
    .hidden { display:none; }
    .bottom-nav { position:fixed; bottom:0; width:100%; display:flex; background:#512da8; color:white; justify-content:space-around; padding:8px 0; font-size:14px; }
    input, select { width:90%; padding:8px; margin:8px auto; display:block; border-radius:5px; border:1px solid #ccc; }
    button { background:#6739b7; color:white; padding:10px 15px; border:none; border-radius:5px; cursor:pointer; display:block; margin:10px auto; font-size:16px; }
</style>
</head>
<body>

<!-- HOME -->
<div id="home">
    <header>ğŸ“± PhonePe Demo</header>
    <div class="balance">ğŸ’° SBI Balance: â‚¹<span id="balance">600000</span></div>

    <h3 style="padding-left:10px;">ğŸ’³ Money Transfers</h3>
    <div class="section">
        <div class="card" onclick="openPage('sendMoneyPage')">Send Money</div>
        <div class="card" onclick="openPage('rechargePage')">Recharge</div>
        <div class="card" onclick="openPage('payBillsPage')">Pay Bills</div>
        <div class="card" onclick="openPage('qrPage')">QR Scan</div>
    </div>

    <h3 style="padding-left:10px;">ğŸ“‚ Categories</h3>
    <div class="section">
        <div class="card" onclick="openCategory('Electricity')">Electricity</div>
        <div class="card" onclick="openCategory('DTH')">DTH</div>
        <div class="card" onclick="openCategory('Gas')">Gas</div>
        <div class="card" onclick="openCategory('Water')">Water</div>
    </div>
</div>

<!-- SEND MONEY -->
<div id="sendMoneyPage" class="hidden">
    <header><button onclick="goBack()">â¬…</button>Send Money</header>
    <input type="text" id="upiId" placeholder="Enter UPI ID">
    <input type="number" id="sendAmount" placeholder="Enter Amount">
    <input type="password" id="sendPin" placeholder="Enter UPI PIN">
    <button onclick="processSendMoney()">Send</button>
</div>

<!-- RECHARGE -->
<div id="rechargePage" class="hidden">
    <header><button onclick="goBack()">â¬…</button>Mobile Recharge</header>
    <input type="text" id="mobileNumber" placeholder="Enter Mobile Number">
    <input type="number" id="rechargeAmount" placeholder="Enter Amount">
    <input type="password" id="rechargePin" placeholder="Enter UPI PIN">
    <button onclick="processRecharge()">Recharge</button>
</div>

<!-- PAY BILLS -->
<div id="payBillsPage" class="hidden">
    <header><button onclick="goBack()">â¬…</button>Pay Bills</header>
    <input type="text" id="billType" placeholder="Bill Type">
    <input type="number" id="billAmount" placeholder="Enter Amount">
    <input type="password" id="billPin" placeholder="Enter UPI PIN">
    <button onclick="processBill()">Pay Bill</button>
</div>

<!-- CATEGORY -->
<div id="categoryPage" class="hidden">
    <header><button onclick="goBack()">â¬…</button><span id="categoryTitle"></span></header>
    <input type="number" id="categoryAmount" placeholder="Enter Amount">
    <input type="password" id="categoryPin" placeholder="Enter UPI PIN">
    <button onclick="processCategory()">Pay</button>
</div>

<!-- HISTORY -->
<div id="historyPage" class="hidden">
    <header><button onclick="goBack()">â¬…</button>Transaction History</header>
    <ul id="historyList" style="padding:10px;"></ul>
</div>

<!-- QR SCANNER -->
<div id="qrPage" class="hidden">
    <header><button onclick="stopQR()">â¬…</button>QR Scanner</header>
    <div id="reader" style="width:100%;"></div>
</div>

<!-- NAV -->
<div class="bottom-nav">
    <div onclick="openPage('home')">ğŸ <br>Home</div>
    <div onclick="openPage('historyPage')">ğŸ“œ<br>History</div>
    <div onclick="alert('ğŸ Offers Coming Soon!')">ğŸ<br>Offers</div>
    <div onclick="alert('ğŸ›¡ Insurance Coming Soon!')">ğŸ›¡<br>Insurance</div>
    <div onclick="alert('ğŸ’¹ Wealth Coming Soon!')">ğŸ’¹<br>Wealth</div>
</div>

<script>
let balance = 600000;
let historyData = JSON.parse(localStorage.getItem("transactions") || "[]");
let currentPage = "home";
let currentCategory = "";
let qrScanner = null;

function updateBalance(){ document.getElementById("balance").innerText = balance; }
function openPage(pageId){
    document.getElementById(currentPage).classList.add("hidden");
    document.getElementById(pageId).classList.remove("hidden");
    currentPage = pageId;
    if(pageId==="historyPage") showHistory();
    if(pageId==="qrPage") startQR();
}
function goBack(){ openPage("home"); }
function openCategory(category){
    currentCategory = category;
    document.getElementById("categoryTitle").innerText = category + " Payment";
    openPage("categoryPage");
}
function addTransaction(type, amount){
    let date = new Date().toLocaleString();
    historyData.push({type, amount, date});
    localStorage.setItem("transactions", JSON.stringify(historyData));
}
function processSendMoney(){
    let upi = document.getElementById("upiId").value;
    let amount = parseInt(document.getElementById("sendAmount").value);
    let pin = document.getElementById("sendPin").value;
    if(pin==="3474" && amount>0 && amount<=balance){
        balance -= amount; updateBalance();
        addTransaction("Sent to " + upi, amount);
        alert("âœ… Money sent successfully!"); goBack();
    } else alert("âŒ Transaction failed!");
}
function processRecharge(){
    let mobile = document.getElementById("mobileNumber").value;
    let amount = parseInt(document.getElementById("rechargeAmount").value);
    let pin = document.getElementById("rechargePin").value;
    if(pin==="3474" && amount>0 && amount<=balance){
        balance -= amount; updateBalance();
        addTransaction("Recharge to " + mobile, amount);
        alert("âœ… Recharge successful!"); goBack();
    } else alert("âŒ Transaction failed!");
}
function processBill(){
    let billType = document.getElementById("billType").value;
    let amount = parseInt(document.getElementById("billAmount").value);
    let pin = document.getElementById("billPin").value;
    if(pin==="3474" && amount>0 && amount<=balance){
        balance -= amount; updateBalance();
        addTransaction(billType + " Bill Paid", amount);
        alert("âœ… Bill paid successfully!"); goBack();
    } else alert("âŒ Transaction failed!");
}
function processCategory(){
    let amount = parseInt(document.getElementById("categoryAmount").value);
    let pin = document.getElementById("categoryPin").value;
    if(pin==="3474" && amount>0 && amount<=balance){
        balance -= amount; updateBalance();
        addTransaction(currentCategory + " Bill Paid", amount);
        alert(`âœ… ${currentCategory} bill paid successfully!`); goBack();
    } else alert("âŒ Transaction failed!");
}
function showHistory(){
    let list = document.getElementById("historyList");
    list.innerHTML = "";
    historyData.forEach(tx=>{
        let li = document.createElement("li");
        li.textContent = `${tx.date} - ${tx.type} - â‚¹${tx.amount}`;
        list.appendChild(li);
    });
}

// QR SCANNER FUNCTIONS
function startQR(){
    qrScanner = new Html5Qrcode("reader");
    qrScanner.start({facingMode:"environment"}, {fps:10, qrbox:250},
        (decodedText)=>{
            stopQR();
            document.getElementById("upiId").value = decodedText;
            openPage("sendMoneyPage");
        },
        (error)=>{}
    ).catch(err=>alert("Camera Error: " + err));
}
function stopQR(){
    if(qrScanner){
        qrScanner.stop().then(()=>{ qrScanner.clear(); }).catch(()=>{});
    }
    goBack();
}

updateBalance();
</script>

</body>
</html>